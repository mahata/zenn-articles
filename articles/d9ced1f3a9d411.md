---
title: "React (Vite) + Spring Boot (Kotlin) ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®åˆæœŸè¨­å®š"
emoji: "ğŸ¥·"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["react", "typescript", "vite", "spring", "kotlin"]
published: true
---

## ã“ã®è¨˜äº‹ã¯ä½•ã§ã™ã‹?

æ–°è¦ã«ã‚¦ã‚§ãƒ–ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ React (ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰) ã¨ Spring Boot (ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰) ã§æ§‹ç¯‰ã—ãŸã¨ãã®åˆæœŸè¨­å®šã«é–¢ã™ã‚‹ãƒ¡ãƒ¢ã§ã™ã€‚ç‰¹ã« React ã®è¨­å®šã«ã¤ã„ã¦ç„¦ç‚¹ã‚’ç½®ã„ã¦è¨˜è¿°ã—ã¾ã™ã€‚Spring Boot ã¯æ¯ã‚ŒãŸ [Spring Initializr](https://start.spring.io/) ã§å®¹æ˜“ã«è¨­å®šã§ãã‚‹ä¸€æ–¹ã€React é–¢é€£ã®è¨­å®šã¯ãƒˆãƒ¬ãƒ³ãƒ‰ã®ç§»ã‚Šå¤‰ã‚ã‚ŠãŒæ¿€ã—ã„ãŸã‚ã§ã™ã€‚ãªãŠã€ã“ã®è¨˜äº‹ã§ã¯ [Vite](https://ja.vitejs.dev/) ã§ React ã®è¨­å®šã‚’ã—ã¾ã™ã€‚

æœ¬è¨˜äº‹ã®é€šã‚Šã«è¨­å®šã™ã‚‹ã¨ã€æ¬¡ã®ã‚ˆã†ãªãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆã«ãªã‚Šã¾ã™ã€‚`frontend/` ã«ã¯ React ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒã‚ã‚Šã€`backend/` ã«ã¯ Spring Boot ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒã‚ã‚‹ã€ã¨ã„ã†ã‚¤ãƒ¡ãƒ¼ã‚¸ã§ã™ã€‚

```
$ tree .
.
â”œâ”€â”€ README.md
â”œâ”€â”€ backend
â”‚   â”œâ”€â”€... 
â”‚   ...
â””â”€â”€ frontend
    â”œâ”€â”€ ...
    ...
```

## `frontend/` ã‚’ä½œã‚‹

æ–°è¦ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã« `frontend/` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œã‚Šã€ãã“ã« React ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’é…ç½®ã—ã¾ã™ã€‚

### Vite ã§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®é››å½¢ã‚’ä½œã‚‹

æ¬¡ã®ã‚³ãƒãƒ³ãƒ‰ã§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®é››å½¢ã‚’ä½œã‚Œã¾ã™ã€‚

```
$ npm create vite@latest frontend -- --template react-ts
$ cd frontend
$ npm install
```

ã“ã‚Œã§ React ã®å®Ÿè¡Œã«å¿…è¦ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¾ã™ã€‚ç¶šã‘ã¦ `npm run dev` ã¨ã™ã‚‹ã¨ React ãŒç«‹ã¡ä¸ŠãŒã‚Šã€`http://localhost:5173` ã§ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å—ã‘ä»˜ã‘ã¾ã™ã€‚

### Vite ã§ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã™ã‚‹

[Vitest](https://vitest.dev/) ã‚’è¿½åŠ ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚

```
$ npm install --save-dev vitest
```

ã‚ã‚ã›ã¦ `package.json` ã® scripts ã« `"test":` ã®é …ã‚’è¶³ã—ã¾ã™ã€‚æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

```json
...
  "scripts": {
    "dev": "vite",
    "build": "tsc && vite build",
    "lint": "eslint . --ext ts,tsx --report-unused-disable-directives --max-warnings 0",
    "preview": "vite preview",
    "test": "vitest run"   <-- è¿½åŠ 
  },
...
```

ã“ã‚Œã§ `npm test` ã§ Vitest ãŒèµ·å‹•ã—ã¾ã™ã€‚

### Vite ã§ **React ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ãƒ†ã‚¹ãƒˆ** ã‚’å®Ÿè¡Œã™ã‚‹

React ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹ã«ã¯ã€ã‚‚ã†å°‘ã—è¨­å®šãŒå¿…è¦ã§ã™ã€‚

React ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã—ãŸã‚Šã€ä¾¿åˆ©ãªãƒãƒƒãƒãƒ£ãƒ¼ã‚’åˆ©ç”¨ã™ã‚‹ãŸã‚ã€æ¬¡ã®ã‚ˆã†ã«ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’è¿½åŠ ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚

```
$ npm install --save-dev jsdom @testing-library/react @testing-library/jest-dom @testing-library/user-event jest-extended
```

ç¶šã‘ã¦ `vite.config.ts` ã‚’æ¬¡ã®ã‚ˆã†ã«æ›¸ãæ›ãˆã¾ã™ã€‚

```typescript
/// <reference types="vitest" />

import { defineConfig } from 'vite'
import react from '@vitejs/plugin-react'

// https://vitejs.dev/config/
export default defineConfig({
  plugins: [react()],
  test: {
    globals: true,
    environment: 'jsdom',
    setupFiles: './src/setup.ts',
  },
})
```

`./src/setup.ts` ã«ã¯æ¬¡ã®äºŒè¡Œã‚’è¨˜è¿°ã—ã¾ã™ã€‚

```
import '@testing-library/jest-dom/extend-expect'
import 'jest-extended';
```

ã“ã‚Œã§ `jsdom` ç’°å¢ƒã« React ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’æç”»ã—ãŸã‚Šã€ã‚¤ãƒ™ãƒ³ãƒˆã‚’ç™ºè¡Œã—ãŸã‚Šã€å†…å®¹ã‚’ã‚¢ã‚µãƒ¼ãƒˆã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

è©¦ã—ã«ã€æ¨™æº–ã§æä¾›ã•ã‚Œã‚‹ `App.tsx` ã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹ãŸã‚ã€æ¬¡ã®ã‚ˆã†ãª `App.test.tsx` ã‚’æ›¸ã‘ã¾ã™ã€‚

```typescript jsx
import { describe, it } from 'vitest'
import { render, screen } from '@testing-library/react'
import App from './App'

describe('App', () => {
    it("ã¯ã˜ã‚ã¦ã® Vitest", () => {
        render(<App />)
        expect(screen.getByText("Click on the Vite and React logos to learn more")).toBeInTheDocument();
    });
})
```

## `backend/` ã‚’ä½œã‚‹

Spring Initializr ã§é©å½“ãªãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œã‚Šã¾ã™ã€‚ã“ã“ã§ã¯ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªã¨ã—ã¦ Kotlin ã‚’é¸æŠã—ã€Dependencies ã« Spring Web ã‚’å«ã‚ã¦ã„ã‚‹ã¨ä»®å®šã—ã¦ã„ã¾ã™ã€‚

ç”Ÿæˆã•ã‚ŒãŸãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’è§£å‡ã—ã¦ `backend/` ã¨ã„ã†åå‰ã§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ«ãƒ¼ãƒˆç›´ä¸‹ã«ç½®ãã¾ã™ã€‚å…ˆã«ä½œæˆã—ãŸ `frontend/` ã¨ã®é€£æºç¢ºèªã®ãŸã‚ã€ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ãƒ€ãƒŸãƒ¼ã® API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’ä½œæˆã—ã¾ã™ã€‚æ¬¡ã®ã‚ˆã†ãªã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã‚’ä½œã‚Šã¾ã™ã€‚

```kotlin
package com.example.demo

import org.springframework.web.bind.annotation.GetMapping
import org.springframework.web.bind.annotation.RequestMapping
import org.springframework.web.bind.annotation.RestController

data class Demo(val name: String)

@RestController
@RequestMapping("/api/v1/demo")
class DemoController {
    @GetMapping
    fun demo(): Demo {
        return Demo("ã‚±ãƒ³ã‚·ãƒ­ã‚¦")
    }
}
```

ã“ã®çŠ¶æ…‹ã§ Spring Boot ã‚’èµ·å‹•ã™ã‚‹ã¨ `http://localhost:8080/api/v1/demo` ã¸ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã« `{ "name": "ã‚±ãƒ³ã‚·ãƒ­ã‚¦" }` ã¨ã„ã† JSON ãŒè¿”ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚ 

## Proxy ã‚’è¨­å®šã™ã‚‹

`frontend/` ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‹ã‚‰ `backend/` ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¸ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã¯ã€ãƒãƒ¼ãƒˆç•ªå·ã®é•ã„ã‹ã‚‰ã‚¯ãƒ­ã‚¹ã‚ªãƒªã‚¸ãƒ³ã«ãªã‚Šã¾ã™ã€‚ç‰¹åˆ¥ãªç†ç”±ãŒãªã„å ´åˆã€ã‚¯ãƒ­ã‚¹ã‚ªãƒªã‚¸ãƒ³ãƒªã‚¯ã‚¨ã‚¹ãƒˆã¯è¨±å¯ã—ãªã„æ–¹ãŒæœ›ã¾ã—ã„ã§ã™ã€‚ã“ã“ã§ã¯ `frontend/` ã« Proxy ã‚’è¨­å®šã™ã‚‹ã“ã¨ã§å¯¾å¿œã—ã¾ã—ã‚‡ã†ã€‚

å…·ä½“çš„ã«ã¯ `vite.config.ts` ã«æ¬¡ã®è¨­å®šã‚’è¿½åŠ ã—ã¾ã™ã€‚

```
...
  server: {
    proxy: {
      "/api": {
        target: "http://localhost:8080",
        changeOrigin: true,
        secure: false,
      }
    }
  }
...
```

å¿µã®ãŸã‚ã€å…ˆã«è¨­å®šã—ãŸã‚‚ã®ã¨ã‚ã‚ã›ã¦å…¨ä½“ã® `vite.config.ts` ã‚’æ²è¼‰ã—ã¾ã™ã€‚

```
/// <reference types="vitest" />

import { defineConfig } from 'vite'
import react from '@vitejs/plugin-react'

// https://vitejs.dev/config/
export default defineConfig({
  plugins: [react()],
  test: {
    globals: true,
    environment: 'jsdom',
    setupFiles: './src/setup.ts',
  },
  server: {
    proxy: {
      "/api": {
        target: "http://localhost:8080",
        changeOrigin: true,
        secure: false,
      }
    }
  }
})
```

ã“ã“ã¾ã§ã™ã‚Œã° React ã¨ Spring Boot ã‚’çµ„ã¿åˆã‚ã›ãŸé–‹ç™ºã‚’ã¯ã˜ã‚ã‚‰ã‚Œã¾ã™ã€‚

ç´°ã€…ã¨ã—ãŸã¨ã“ã‚ã§ã¯ãƒªãƒ³ã‚¿ãƒ¼ã‚„ CI/CD ã§ã‚ã£ãŸã‚Š CSS ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã®çµ„ã¿è¾¼ã¿ãªã©ã‚‚ã‚ã‚Šã¾ã™ãŒã€ãã‚Œã‚‰ã«ã¤ã„ã¦ã¯ã‚¦ã‚§ãƒ–ä¸Šã«ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ãŒãŸãã•ã‚“ã‚ã‚‹ã®ã§ã€ã“ã“ã§ã¯æ‰±ã„ã¾ã›ã‚“ã€‚
